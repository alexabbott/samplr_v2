<div ng-include="'components/navbar/navbar.html'"></div>
<div class="container">

  <div class="row">

    <div class="col-lg-12 main-sample-holder">
      <ul class="nav nav-tabs nav-stacked col-lg-8 col-lg-offset-2">
        <li class="sample" ng-repeat="thing in awesomeThings | limitTo: 16">
          <span class="sample-inner">
            <div class="sample-name">{{thing.name}}</div>
            <!-- <button type="button" class="close" ng-click="deleteThing(thing)">&times;</button> -->
            <div style="font-size: 8px;" class="sample-info">{{thing.info}}</div>
            <!-- <br><span class="sample-author">{{thing.author}}</span> -->
            <br><audio class="sample-player" crossorigin="anonymous" src="{{trustSrc(thing.url)}}" alt="{{thing.url}}"></audio>
          </span>
          <select class="effects">
            <option value="gain" selected="selected">Gain</option>
            <option value="filter">Filter</option>
            <option value="loop">Looper</option>
            <option value="stretch">Stretch</option>
          </select>
          <input type="range" class="gain gain-{{thing.name}}" min="0" max="1" value="1" step="0.1">
          <input type="range" class="filter filter-{{thing.name}}" min="0" max="5000" value="2500">
          <input type="range" class="stretch stretch-{{thing.name}}" min="0.5" max="2" value="1" step="0.1">
          <input type="range" class="loop loop-{{thing.name}}" min="100" max="2000" value="500" step="100">
        </li>
      </ul>
    </div>

    <div class="record">record</div>
    <div class="stop">stop</div>

    <div class="col-lg-8 col-lg-offset-2 save-kit-button-holder">
      <button type="button" class="btn btn-primary btn-lg save-kit-button hide" data-toggle="modal" data-target="#saveKitModal">
        Save current kit
      </button>
    </div>
    <div class="col-lg-8 col-lg-offset-2 choose-kit-button-holder">
      <button type="button" class="btn btn-primary btn-lg choose-kit-button">
        Choose a kit <span class="hide btn-choose-kit-close">&times;</span>
      </button>
    </div>
    <div class="col-lg-12 kit-options">
      <div class="col-lg-12 kit-options-holder">
        <ul class="nav nav-tabs nav-stacked kit-samples" ng-repeat="kit in awesomeKits">
          <a href="#" class="kit-name">{{kit.name}}
            <!-- <button type="button" class="close" ng-click="deleteKit(kit)">&times;</button> -->
          </a>
          <li class="sample">
            <div class="sample-name">{{kit.sample1name}}</div>
            <div style="font-size: 8px;">{{kit.sample1info}}</div>
            <br><audio crossorigin="anonymous" src="{{trustSrc(kit.sample1url)}}" alt="{{kit.sample1url}}" class="sample-player">
          </li>
          <li class="sample">
            <div class="sample-name">{{kit.sample2name}}</div>
            <div style="font-size: 8px;">{{kit.sample2info}}</div>
            <br><audio crossorigin="anonymous" src="{{trustSrc(kit.sample2url)}}" alt="{{kit.sample2url}}" class="sample-player">
          </li>
          <li class="sample">
            <div class="sample-name">{{kit.sample3name}}</div>
            <div style="font-size: 8px;">{{kit.sample3info}}</div>
            <br><audio crossorigin="anonymous" src="{{trustSrc(kit.sample3url)}}" alt="{{kit.sample3url}}" class="sample-player">
          </li>
          <li class="sample">
            <div class="sample-name">{{kit.sample4name}}</div>
            <div style="font-size: 8px;">{{kit.sample4info}}</div>
            <br><audio crossorigin="anonymous" src="{{trustSrc(kit.sample4url)}}" alt="{{kit.sample4url}}" class="sample-player">
          </li>
          <li class="sample">
            <div  class="sample-name">{{kit.sample5name}}</div>
            <div style="font-size: 8px;">{{kit.sample5info}}</div>
            <br><audio crossorigin="anonymous" src="{{trustSrc(kit.sample5url)}}" alt="{{kit.sample5url}}" class="sample-player">
          </li>
          <li class="sample">
            <div class="sample-name">{{kit.sample6name}}</div>
            <div style="font-size: 8px;">{{kit.sample6info}}</div>
            <br><audio crossorigin="anonymous" src="{{trustSrc(kit.sample6url)}}" alt="{{kit.sample6url}}" class="sample-player">
          </li>
          <li class="sample">
            <div class="sample-name">{{kit.sample7name}}</div>
            <div style="font-size: 8px;">{{kit.sample7info}}</div>
            <br><audio crossorigin="anonymous" src="{{trustSrc(kit.sample7url)}}" alt="{{kit.sample7url}}" class="sample-player">
          </li>
          <li class="sample">
            <div class="sample-name">{{kit.sample8name}}</div>
            <div style="font-size: 8px;">{{kit.sample8info}}</div>
            <br><audio crossorigin="anonymous" src="{{trustSrc(kit.sample8url)}}" alt="{{kit.sample8url}}" class="sample-player">
          </li>
          <li class="sample">
            <div class="sample-name">{{kit.sample9name}}</div>
            <div style="font-size: 8px;">{{kit.sample9info}}</div>
            <br><audio crossorigin="anonymous" src="{{trustSrc(kit.sample9url)}}" alt="{{kit.sample9url}}" class="sample-player">
          </li>
          <li class="sample">
            <div class="sample-name">{{kit.sample10name}}</div>
            <div style="font-size: 8px;">{{kit.sample10info}}</div>
            <br><audio crossorigin="anonymous" src="{{trustSrc(kit.sample10url)}}" alt="{{kit.sample10url}}" class="sample-player">
          </li>
          <li class="sample">
            <div class="sample-name">{{kit.sample11name}}</div>
            <div style="font-size: 8px;">{{kit.sample11info}}</div>
            <br><audio crossorigin="anonymous" src="{{trustSrc(kit.sample11url)}}" alt="{{kit.sample11url}}" class="sample-player">
          </li>
          <li class="sample">
            <div class="sample-name">{{kit.sample12name}}</div>
            <div style="font-size: 8px;">{{kit.sample12info}}</div>
            <br><audio crossorigin="anonymous" src="{{trustSrc(kit.sample12url)}}" alt="{{kit.sample12url}}" class="sample-player">
          </li>
          <li class="sample">
            <div class="sample-name">{{kit.sample13name}}</div>
            <div style="font-size: 8px;">{{kit.sample13info}}</div>
            <br><audio crossorigin="anonymous" src="{{trustSrc(kit.sample13url)}}" alt="{{kit.sample13url}}" class="sample-player">
          </li>
          <li class="sample">
            <div class="sample-name">{{kit.sample14name}}</div>
            <div style="font-size: 8px;">{{kit.sample14info}}</div>
            <br><audio crossorigin="anonymous" src="{{trustSrc(kit.sample14url)}}" alt="{{kit.sample14url}}" class="sample-player">
          </li>
          <li class="sample">
            <div class="sample-name">{{kit.sample15name}}</div>
            <div style="font-size: 8px;">{{kit.sample15info}}</div>
            <br><audio crossorigin="anonymous" src="{{trustSrc(kit.sample15url)}}" alt="{{kit.sample15url}}" class="sample-player">
          </li>
          <li class="sample">
            <div class="sample-name">{{kit.sample16name}}</div>
            <div style="font-size: 8px;">{{kit.sample16info}}</div>
            <br><audio crossorigin="anonymous" src="{{trustSrc(kit.sample16url)}}" alt="{{kit.sample16url}}" class="sample-player">
          </li>
        </ul>
      </div>
    </div>

    <div class="col-lg-8 col-lg-offset-2 bank-button-holder">
      <button type="button" class="btn btn-primary btn-lg" id="btn-show-bank">
        Show Sample Bank
      </button>
      <button type="button" class="btn btn-primary btn-lg hide" id="btn-hide-bank">
        Hide Sample Bank <span class="btn-close-bank">&times;</span>
      </button>
      <div class="col-lg-12 sample-bank-buttons hide">
        <input ng-model="query" class="sample-search" placeholder="Search for a sample">
        <button type="button" class="btn btn-primary btn-lg btn-add-sample" data-toggle="modal" data-target="#addSampleModal">
          + Upload a New Sample
        </button>
      </div>
    </div>

    <div class="col-lg-12 sample-bank">
      <ul class="nav nav-tabs nav-stacked col-lg-12">
        <li class="sample" ng-repeat="thing in awesomeThings | filter: query" onclick="reply_click(this.innerHTML);">
          <div class="sample-name">{{thing.name}}</div>
            <!-- <button type="button" class="close" ng-click="deleteThing(thing)">&times;</button> -->
          <div style="font-size: 8px;" class="sample-info">{{thing.info}}</div>
            <!-- <br><span class="sample-author">{{thing.author}}</span> -->
          <br><audio crossorigin="anonymous" class="sample-player" src="{{trustSrc(thing.url)}}" alt="{{thing.url}}">
        </li>
      </ul>
    </div>
  </div>


<!-- Modal -->
<div class="modal fade" id="addSampleModal" tabindex="-1" role="dialog" aria-labelledby="addSampleModal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="addSampleLabel">Upload a new sample</h4>
      </div>
      <div class="modal-body">
        <form class="thing-form">
          <p class="input-group">
            <input type="text" class="form-control" placeholder="Sample Name" ng-model="newThing" onchange="addAuthor()">
            <select class="form-control" ng-model="newThingInfo">
                  <option value="" disabled selected>Choose a Category</option>
                  <option value="Kick">Kick</option>
                  <option value="Snare">Snare</option>
                  <option value="Cymbal">Cymbal</option>
                  <option value="Perc">Perc</option>
                  <option value="FX">FX</option>
                  <option value="Vocal">Vocal</option>
                  <option value="Bass">Bass</option>
                  <option value="Lead">Lead</option>
            </select>
            <input type="text" class="form-control src" placeholder="Sample URL" ng-model="newThingUrl">
            <input type="text" class="form-control author" placeholder="{{ getCurrentUser().name }}" ng-model="newThingAuthor" disabled><br>
            <!-- The Upload Form -->
            <div class="col-md-12">
              <input class="bottom-marg-15" type="file" name="file" file></input>
              <!-- Progress Bar -->
              <div class="progress">
                <div class="progress-bar" role="progressbar" aria-valuenow="{{ uploadProgress }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ uploadProgress }}%;">
                  {{ uploadProgress == 0 ? '' : uploadProgress + '%' }}
                </div>
              </div>
              <a class="btn btn-primary btn-block btn-lg sample-upload-button" ng-click="upload()" onclick="setTimeout(function(){addURL(fileURL)},2000);">Upload</a>
            </div>
          </div>
          </p>
          <button type="submit" class="btn btn-primary btn-submit" ng-click="addThing()" >Add New Sample</button>
        </form>
      </div>
    </div>
  </div>
</div>

  <!-- Modal -->
<div class="modal fade" id="saveKitModal" tabindex="-1" role="dialog" aria-labelledby="saveKitLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="saveKitLabel">Save Current Kit</h4>
      </div>
      <div class="modal-body">
        <form class="kit-form">
      <p class="input-group kit-inputs">
        <input type="text" class="form-control kit-name-input" placeholder="Kit Name" ng-model="newKit">
        <input type="text" class="form-control sample-1-name save-kit-input" placeholder="New Kit Sample 1 Name" ng-model="newKitSample1Name">
        <input type="text" class="form-control sample-1-info save-kit-input" placeholder="New Kit Sample 1 Info" ng-model="newKitSample1Info">
        <input type="text" class="form-control sample-1-url save-kit-input" placeholder="New Kit Sample 1 URL" ng-model="newKitSample1Url">
        <input type="text" class="form-control sample-2-name save-kit-input" placeholder="New Kit Sample 2 Name" ng-model="newKitSample2Name">
        <input type="text" class="form-control sample-2-info save-kit-input" placeholder="New Kit Sample 2 Info" ng-model="newKitSample2Info">
        <input type="text" class="form-control sample-2-url save-kit-input" placeholder="New Kit Sample 2 URL" ng-model="newKitSample2Url">
        <input type="text" class="form-control sample-3-name save-kit-input" placeholder="New Kit Sample 3 Name" ng-model="newKitSample3Name">
        <input type="text" class="form-control sample-3-info save-kit-input" placeholder="New Kit Sample 3 Info" ng-model="newKitSample3Info">
        <input type="text" class="form-control sample-3-url save-kit-input" placeholder="New Kit Sample 3 URL" ng-model="newKitSample3Url">
        <input type="text" class="form-control sample-4-name save-kit-input" placeholder="New Kit Sample 4 Name" ng-model="newKitSample4Name">
        <input type="text" class="form-control sample-4-info save-kit-input" placeholder="New Kit Sample 4 Info" ng-model="newKitSample4Info">
        <input type="text" class="form-control sample-4-url save-kit-input" placeholder="New Kit Sample 4 URL" ng-model="newKitSample4Url">
        <input type="text" class="form-control sample-5-name save-kit-input" placeholder="New Kit Sample 5 Name" ng-model="newKitSample5Name">
        <input type="text" class="form-control sample-5-info save-kit-input" placeholder="New Kit Sample 5 Info" ng-model="newKitSample5Info">
        <input type="text" class="form-control sample-5-url save-kit-input" placeholder="New Kit Sample 5 URL" ng-model="newKitSample5Url">
        <input type="text" class="form-control sample-6-name save-kit-input" placeholder="New Kit Sample 6 Name" ng-model="newKitSample6Name">
        <input type="text" class="form-control sample-6-info save-kit-input" placeholder="New Kit Sample 6 Info" ng-model="newKitSample6Info">
        <input type="text" class="form-control sample-6-url save-kit-input" placeholder="New Kit Sample 6 URL" ng-model="newKitSample6Url">
        <input type="text" class="form-control sample-7-name save-kit-input" placeholder="New Kit Sample 7 Name" ng-model="newKitSample7Name">
        <input type="text" class="form-control sample-7-info save-kit-input" placeholder="New Kit Sample 7 Info" ng-model="newKitSample7Info">
        <input type="text" class="form-control sample-7-url save-kit-input" placeholder="New Kit Sample 7 URL" ng-model="newKitSample7Url">
        <input type="text" class="form-control sample-8-name save-kit-input" placeholder="New Kit Sample 8 Name" ng-model="newKitSample8Name">
        <input type="text" class="form-control sample-8-info save-kit-input" placeholder="New Kit Sample 8 Info" ng-model="newKitSample8Info">
        <input type="text" class="form-control sample-8-url save-kit-input" placeholder="New Kit Sample 8 URL" ng-model="newKitSample8Url">
        <input type="text" class="form-control sample-9-name save-kit-input" placeholder="New Kit Sample 9 Name" ng-model="newKitSample9Name">
        <input type="text" class="form-control sample-9-info save-kit-input" placeholder="New Kit Sample 9 Info" ng-model="newKitSample9Info">
        <input type="text" class="form-control sample-9-url save-kit-input" placeholder="New Kit Sample 9 URL" ng-model="newKitSample9Url">
        <input type="text" class="form-control sample-10-name save-kit-input" placeholder="New Kit Sample 10 Name" ng-model="newKitSample10Name">
        <input type="text" class="form-control sample-10-info save-kit-input" placeholder="New Kit Sample 10 Info" ng-model="newKitSample10Info">
        <input type="text" class="form-control sample-10-url save-kit-input" placeholder="New Kit Sample 10 URL" ng-model="newKitSample10Url">
        <input type="text" class="form-control sample-11-name save-kit-input" placeholder="New Kit Sample 11 Name" ng-model="newKitSample11Name">
        <input type="text" class="form-control sample-11-info save-kit-input" placeholder="New Kit Sample 11 Info" ng-model="newKitSample11Info">
        <input type="text" class="form-control sample-11-url save-kit-input" placeholder="New Kit Sample 11 URL" ng-model="newKitSample11Url">
        <input type="text" class="form-control sample-12-name save-kit-input" placeholder="New Kit Sample 12 Name" ng-model="newKitSample12Name">
        <input type="text" class="form-control sample-12-info save-kit-input" placeholder="New Kit Sample 12 Info" ng-model="newKitSample12Info">
        <input type="text" class="form-control sample-12-url save-kit-input" placeholder="New Kit Sample 12 URL" ng-model="newKitSample12Url">
        <input type="text" class="form-control sample-13-name save-kit-input" placeholder="New Kit Sample 13 Name" ng-model="newKitSample13Name">
        <input type="text" class="form-control sample-13-info save-kit-input" placeholder="New Kit Sample 13 Info" ng-model="newKitSample13Info">
        <input type="text" class="form-control sample-13-url save-kit-input" placeholder="New Kit Sample 13 URL" ng-model="newKitSample13Url">
        <input type="text" class="form-control sample-14-name save-kit-input" placeholder="New Kit Sample 14 Name" ng-model="newKitSample14Name">
        <input type="text" class="form-control sample-14-info save-kit-input" placeholder="New Kit Sample 14 Info" ng-model="newKitSample14Info">
        <input type="text" class="form-control sample-14-url save-kit-input" placeholder="New Kit Sample 14 URL" ng-model="newKitSample14Url">
        <input type="text" class="form-control sample-15-name save-kit-input" placeholder="New Kit Sample 15 Name" ng-model="newKitSample15Name">
        <input type="text" class="form-control sample-15-info save-kit-input" placeholder="New Kit Sample 15 Info" ng-model="newKitSample15Info">
        <input type="text" class="form-control sample-15-url save-kit-input" placeholder="New Kit Sample 15 URL" ng-model="newKitSample15Url">
        <input type="text" class="form-control sample-16-name save-kit-input" placeholder="New Kit Sample 16 Name" ng-model="newKitSample16Name">
        <input type="text" class="form-control sample-16-info save-kit-input" placeholder="New Kit Sample 16 Info" ng-model="newKitSample16Info">
        <input type="text" class="form-control sample-16-url save-kit-input" placeholder="New Kit Sample 16 URL" ng-model="newKitSample16Url">
        <button type="submit" class="btn btn-primary add-kit btn-submit" data-dismiss="modal" ng-click="addKit()">Save Kit</button>
    </p>
  </form>
      </div>
    </div>
  </div>
</div>

  <div class="metronome">
    <div><input class="met" type="number" name="bpm" value="60" size="3" /> bpm</div>
    <div class="start-met btn">Start</div>
    <div class="stop-met btn">Stop</div>
  </div>

</div>

<footer class="footer">
  <div class="container">
      <p>Created by alex abbott |
         <a href="https://github.com/alexabbott">@alexabbott</a></p>
  </div>
</footer>
<script>

// allow for effects switching using dropdowns
setTimeout(function(){
  var effects = document.querySelectorAll('.effects');
  for (var e = 0; e < 16; e++) {
    var element = effects[e];
    element.addEventListener('change', changeEffects);
  }

  function changeEffects(e, index) {
    if (this.value == 'gain') {
      this.parentNode.querySelector('.gain').style.display = 'block';
      this.parentNode.querySelector('.filter').style.display = 'none';
      this.parentNode.querySelector('.loop').style.display = 'none';
      this.parentNode.querySelector('.stretch').style.display = 'none';
    } else if (this.value == 'filter') {
      this.parentNode.querySelector('.gain').style.display = 'none';
      this.parentNode.querySelector('.filter').style.display = 'block';
      this.parentNode.querySelector('.loop').style.display = 'none';
      this.parentNode.querySelector('.stretch').style.display = 'none';
    } else if (this.value == 'loop') {
      this.parentNode.querySelector('.gain').style.display = 'none';
      this.parentNode.querySelector('.filter').style.display = 'none';
      this.parentNode.querySelector('.loop').style.display = 'block';
      this.parentNode.querySelector('.stretch').style.display = 'none';
    } else if (this.value == 'stretch') {
      this.parentNode.querySelector('.gain').style.display = 'none';
      this.parentNode.querySelector('.filter').style.display = 'none';
      this.parentNode.querySelector('.loop').style.display = 'none';
      this.parentNode.querySelector('.stretch').style.display = 'block';
    }
  }
}, 1000);


// this is for looping effect
var interval = [];

function play0() {
  myAudio[0].pause();
  myAudio[0].currentTime = 0;
  myAudio[0].play();
}
function play1() {
  myAudio[1].pause();
  myAudio[1].currentTime = 0;
  myAudio[1].play();
}
function play2() {
  myAudio[2].pause();
  myAudio[2].currentTime = 0;
  myAudio[2].play();
}
function play3() {
  myAudio[3].pause();
  myAudio[3].currentTime = 0;
  myAudio[3].play();
}
function play4() {
  myAudio[4].pause();
  myAudio[4].currentTime = 0;
  myAudio[4].play();
}
function play5() {
  myAudio[5].pause();
  myAudio[5].currentTime = 0;
  myAudio[5].play();
}
function play6() {
  myAudio[6].pause();
  myAudio[6].currentTime = 0;
  myAudio[6].play();
}
function play7() {
  myAudio[7].pause();
  myAudio[7].currentTime = 0;
  myAudio[7].play();
}
function play8() {
  myAudio[8].pause();
  myAudio[8].currentTime = 0;
  myAudio[8].play();
}
function play9() {
  myAudio[9].pause();
  myAudio[9].currentTime = 0;
  myAudio[9].play();
}
function play10() {
  myAudio[10].pause();
  myAudio[10].currentTime = 0;
  myAudio[10].play();
}
function play11() {
  myAudio[11].pause();
  myAudio[11].currentTime = 0;
  myAudio[11].play();
}
function play12() {
  myAudio[12].pause();
  myAudio[12].currentTime = 0;
  myAudio[12].play();
}
function play13() {
  myAudio[13].pause();
  myAudio[13].currentTime = 0;
  myAudio[13].play();
}
function play14() {
  myAudio[14].pause();
  myAudio[14].currentTime = 0;
  myAudio[14].play();
}
function play15() {
  myAudio[15].pause();
  myAudio[15].currentTime = 0;
  myAudio[15].play();
}

// sample looping functionality
$('body').on('click', '.loop:eq(0)', function(){
  interval[0] = setInterval(play0, document.querySelectorAll('.sample-player')[0].parentNode.parentNode.querySelector('.loop').value);
});
$('body').on('input', '.loop:eq(0)', function(){
  clearInterval(interval[0]);
});
$('body').on('click', '.loop:eq(1)', function(){
  interval[1] = setInterval(play1, document.querySelectorAll('.sample-player')[1].parentNode.parentNode.querySelector('.loop').value);
});
$('body').on('input', '.loop:eq(1)', function(){
  clearInterval(interval[1]);
});
$('body').on('click', '.loop:eq(2)', function(){
  interval[2] = setInterval(play2, document.querySelectorAll('.sample-player')[2].parentNode.parentNode.querySelector('.loop').value);
});
$('body').on('input', '.loop:eq(2)', function(){
  clearInterval(interval[2]);
});
$('body').on('click', '.loop:eq(3)', function(){
  interval[3] = setInterval(play3, document.querySelectorAll('.sample-player')[3].parentNode.parentNode.querySelector('.loop').value);
});
$('body').on('input', '.loop:eq(3)', function(){
  clearInterval(interval[3]);
});
$('body').on('click', '.loop:eq(4)', function(){
  interval[4] = setInterval(play4, document.querySelectorAll('.sample-player')[4].parentNode.parentNode.querySelector('.loop').value);
});
$('body').on('input', '.loop:eq(4)', function(){
  clearInterval(interval[4]);
});
$('body').on('click', '.loop:eq(5)', function(){
  interval[5] = setInterval(play5, document.querySelectorAll('.sample-player')[5].parentNode.parentNode.querySelector('.loop').value);
});
$('body').on('input', '.loop:eq(5)', function(){
  clearInterval(interval[5]);
});
$('body').on('click', '.loop:eq(6)', function(){
  interval[6] = setInterval(play6, document.querySelectorAll('.sample-player')[6].parentNode.parentNode.querySelector('.loop').value);
});
$('body').on('input', '.loop:eq(6)', function(){
  clearInterval(interval[6]);
});
$('body').on('click', '.loop:eq(7)', function(){
  interval[7] = setInterval(play7, document.querySelectorAll('.sample-player')[7].parentNode.parentNode.querySelector('.loop').value);
});
$('body').on('input', '.loop:eq(7)', function(){
  clearInterval(interval[7]);
});
$('body').on('click', '.loop:eq(8)', function(){
  interval[8] = setInterval(play8, document.querySelectorAll('.sample-player')[8].parentNode.parentNode.querySelector('.loop').value);
});
$('body').on('input', '.loop:eq(8)', function(){
  clearInterval(interval[8]);
});
$('body').on('click', '.loop:eq(9)', function(){
  interval[9] = setInterval(play9, document.querySelectorAll('.sample-player')[9].parentNode.parentNode.querySelector('.loop').value);
});
$('body').on('input', '.loop:eq(9)', function(){
  clearInterval(interval[9]);
});
$('body').on('click', '.loop:eq(10)', function(){
  interval[10] = setInterval(play10, document.querySelectorAll('.sample-player')[10].parentNode.parentNode.querySelector('.loop').value);
});
$('body').on('input', '.loop:eq(10)', function(){
  clearInterval(interval[10]);
});
$('body').on('click', '.loop:eq(11)', function(){
  interval[11] = setInterval(play11, document.querySelectorAll('.sample-player')[11].parentNode.parentNode.querySelector('.loop').value);
});
$('body').on('input', '.loop:eq(11)', function(){
  clearInterval(interval[11]);
});
$('body').on('click', '.loop:eq(12)', function(){
  interval[12] = setInterval(play12, document.querySelectorAll('.sample-player')[12].parentNode.parentNode.querySelector('.loop').value);
});
$('body').on('input', '.loop:eq(12)', function(){
  clearInterval(interval[12]);
});
$('body').on('click', '.loop:eq(13)', function(){
  interval[13] = setInterval(play13, document.querySelectorAll('.sample-player')[13].parentNode.parentNode.querySelector('.loop').value);
});
$('body').on('input', '.loop:eq(13)', function(){
  clearInterval(interval[13]);
});
$('body').on('click', '.loop:eq(14)', function(){
  interval[14] = setInterval(play14, document.querySelectorAll('.sample-player')[14].parentNode.parentNode.querySelector('.loop').value);
});
$('body').on('input', '.loop:eq(14)', function(){
  clearInterval(interval[14]);
});
$('body').on('click', '.loop:eq(15)', function(){
  interval[15] = setInterval(play15, document.querySelectorAll('.sample-player')[15].parentNode.parentNode.querySelector('.loop').value);
});
$('body').on('input', '.loop:eq(15)', function(){
  clearInterval(interval[15]);
});



// start recording
$('.record').on('click', function() {
  startUserMedia();
  startRecording();
});

// stop recording
$('.stop').on('click', function() {
  stopRecording();
});


// recorderjs logi
  var recorder;

  function startUserMedia() {
    var input = recordNode;
    recorder = new Recorder(input);
  }

  function startRecording() {
    recorder && recorder.record();
  }

  function stopRecording() {
    recorder && recorder.stop();

    // create WAV download link using audio data blob
    createDownloadLink();

    recorder.clear();
  }

  function createDownloadLink() {
    recorder && recorder.exportWAV(function(blob) {
      var url = URL.createObjectURL(blob);
      var li = document.createElement('li');
      var au = document.createElement('audio');
      var hf = document.createElement('a');

      au.controls = true;
      au.src = url;
      hf.href = url;
      hf.download = new Date().toISOString() + '.wav';
      hf.innerHTML = hf.download;
      li.appendChild(au);
      li.appendChild(hf);
      document.body.appendChild(li);
    });
  }

var audioCtx,
    myAudio,
    source,
    recordNode,
    filterNodes,
    delayNodes;

source = [];
function setSources() {
  source = [
    audioCtx.createMediaElementSource(myAudio[0]),
    audioCtx.createMediaElementSource(myAudio[1]),
    audioCtx.createMediaElementSource(myAudio[2]),
    audioCtx.createMediaElementSource(myAudio[3]),
    audioCtx.createMediaElementSource(myAudio[4]),
    audioCtx.createMediaElementSource(myAudio[5]),
    audioCtx.createMediaElementSource(myAudio[6]),
    audioCtx.createMediaElementSource(myAudio[7]),
    audioCtx.createMediaElementSource(myAudio[8]),
    audioCtx.createMediaElementSource(myAudio[9]),
    audioCtx.createMediaElementSource(myAudio[10]),
    audioCtx.createMediaElementSource(myAudio[11]),
    audioCtx.createMediaElementSource(myAudio[12]),
    audioCtx.createMediaElementSource(myAudio[13]),
    audioCtx.createMediaElementSource(myAudio[14]),
    audioCtx.createMediaElementSource(myAudio[15])
  ];
}

function setSingleSource(n) {
  source[n] = audioCtx.createMediaElementSource(myAudio[n]);
}

filterNodes = [];

var filters = [];

function setFilterNodes() {
  filterNodes = [
      audioCtx.createBiquadFilter(),
      audioCtx.createBiquadFilter(),
      audioCtx.createBiquadFilter(),
      audioCtx.createBiquadFilter(),
      audioCtx.createBiquadFilter(),
      audioCtx.createBiquadFilter(),
      audioCtx.createBiquadFilter(),
      audioCtx.createBiquadFilter(),
      audioCtx.createBiquadFilter(),
      audioCtx.createBiquadFilter(),
      audioCtx.createBiquadFilter(),
      audioCtx.createBiquadFilter(),
      audioCtx.createBiquadFilter(),
      audioCtx.createBiquadFilter(),
      audioCtx.createBiquadFilter(),
      audioCtx.createBiquadFilter()
  ];
}

function setFilterValues() {

  $('.filter').each(function() {
    filters.push($(this));
  });

  for (var n=0;n<16;n++) {
    filterNodes[n].frequency.value = $(filters[n]).val();
    filterNodes[n].type = "bandpass";
    filterNodes[n].Q.value = 0;
  }
}

function setDestinations() {
  // connect the AudioBufferSourceNode to the gainNode
  // and the gainNode to the destination, so we can play the
  // music and adjust the volume using the mouse cursor
  source[0].connect(filterNodes[0]).connect(recordNode).connect(audioCtx.destination);
  source[1].connect(filterNodes[1]).connect(recordNode).connect(audioCtx.destination);
  source[2].connect(filterNodes[2]).connect(recordNode).connect(audioCtx.destination);
  source[3].connect(filterNodes[3]).connect(recordNode).connect(audioCtx.destination);
  source[4].connect(filterNodes[4]).connect(recordNode).connect(audioCtx.destination);
  source[5].connect(filterNodes[5]).connect(recordNode).connect(audioCtx.destination);
  source[6].connect(filterNodes[6]).connect(recordNode).connect(audioCtx.destination);
  source[7].connect(filterNodes[7]).connect(recordNode).connect(audioCtx.destination);
  source[8].connect(filterNodes[8]).connect(recordNode).connect(audioCtx.destination);
  source[9].connect(filterNodes[9]).connect(recordNode).connect(audioCtx.destination);
  source[10].connect(filterNodes[10]).connect(recordNode).connect(audioCtx.destination);
  source[11].connect(filterNodes[11]).connect(recordNode).connect(audioCtx.destination);
  source[12].connect(filterNodes[12]).connect(recordNode).connect(audioCtx.destination);
  source[13].connect(filterNodes[13]).connect(recordNode).connect(audioCtx.destination);
  source[14].connect(filterNodes[14]).connect(recordNode).connect(audioCtx.destination);
  source[15].connect(filterNodes[15]).connect(recordNode).connect(audioCtx.destination);
}

function setRecordNode() {
  recordNode = audioCtx.createGain();
}

function setAudio() {
  myAudio = document.querySelectorAll('audio');
}

// Web audio api stuff starts here
setTimeout(function () {
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  setAudio();
  // Create a MediaElementAudioSourceNode
  // Feed the HTMLMediaElement into it

  setSources();

  setFilterNodes();

  setFilterValues();

  $(filters[0]).on('input', function() {
        console.log(filterNodes[0]);
        filterNodes[0].frequency.value = $(filters[0]).val();
  });
  $(filters[1]).on('input', function() {
        filterNodes[1].frequency.value = $(filters[1]).val();
  });
  $(filters[2]).on('input', function() {
        filterNodes[2].frequency.value = $(filters[2]).val();
  });
  $(filters[3]).on('input', function() {
        filterNodes[3].frequency.value = $(filters[3]).val();
  });
  $(filters[4]).on('input', function() {
        filterNodes[4].frequency.value = $(filters[4]).val();
  });
  $(filters[5]).on('input', function() {
        filterNodes[5].frequency.value = $(filters[5]).val();
  });
  $(filters[6]).on('input', function() {
        filterNodes[6].frequency.value = $(filters[6]).val();
  });
  $(filters[7]).on('input', function() {
        filterNodes[7].frequency.value = $(filters[7]).val();
  });
  $(filters[8]).on('input', function() {
        filterNodes[8].frequency.value = $(filters[8]).val();
  });
  $(filters[9]).on('input', function() {
        filterNodes[9].frequency.value = $(filters[9]).val();
  });
  $(filters[10]).on('input', function() {
        filterNodes[10].frequency.value = $(filters[10]).val();
  });
  $(filters[11]).on('input', function() {
        filterNodes[11].frequency.value = $(filters[11]).val();
  });
  $(filters[12]).on('input', function() {
        filterNodes[12].frequency.value = $(filters[12]).val();
  });
  $(filters[13]).on('input', function() {
        filterNodes[13].frequency.value = $(filters[13]).val();
  });
  $(filters[14]).on('input', function() {
        filterNodes[14].frequency.value = $(filters[14]).val();
  });
  $(filters[15]).on('input', function() {
        filterNodes[15].frequency.value = $(filters[15]).val();
  });



  // Set volume
  var gains = [];
  $('.gain').each(function() {
    gains.push($(this));
  });

  $(gains[0]).on('input', function() {
        $('.sample-player')[0].volume = $(gains[0]).val();
  });
  $(gains[1]).on('input', function() {
        $('.sample-player')[1].volume = $(gains[1]).val();
  });
  $(gains[2]).on('input', function() {
        $('.sample-player')[2].volume = $(gains[2]).val();
  });
  $(gains[3]).on('input', function() {
        $('.sample-player')[3].volume = $(gains[3]).val();
  });
  $(gains[4]).on('input', function() {
        $('.sample-player')[4].volume = $(gains[4]).val();
  });
  $(gains[5]).on('input', function() {
        $('.sample-player')[5].volume = $(gains[5]).val();
  });
  $(gains[6]).on('input', function() {
        $('.sample-player')[6].volume = $(gains[6]).val();
  });
  $(gains[7]).on('input', function() {
        $('.sample-player')[7].volume = $(gains[7]).val();
  });
  $(gains[8]).on('input', function() {
        $('.sample-player')[8].volume = $(gains[8]).val();
  });
  $(gains[9]).on('input', function() {
        $('.sample-player')[9].volume = $(gains[9]).val();
  });
  $(gains[10]).on('input', function() {
        $('.sample-player')[10].volume = $(gains[10]).val();
  });
  $(gains[11]).on('input', function() {
        $('.sample-player')[11].volume = $(gains[11]).val();
  });
  $(gains[12]).on('input', function() {
        $('.sample-player')[12].volume = $(gains[12]).val();
  });
  $(gains[13]).on('input', function() {
        $('.sample-player')[13].volume = $(gains[13]).val();
  });
  $(gains[14]).on('input', function() {
        $('.sample-player')[14].volume = $(gains[14]).val();
  });
  $(gains[15]).on('input', function() {
        $('.sample-player')[15].volume = $(gains[15]).val();
  });


  // set playback rate
  var stretches = [];
  $('.stretch').each(function() {
    stretches.push($(this));
  });

  $(stretches[0]).on('input', function() {
        $('.sample-player')[0].playbackRate = $(stretches[0]).val();
  });
  $(stretches[1]).on('input', function() {
        $('.sample-player')[1].playbackRate = $(stretches[1]).val();
  });
  $(stretches[2]).on('input', function() {
        $('.sample-player')[2].playbackRate = $(stretches[2]).val();
  });
  $(stretches[3]).on('input', function() {
        $('.sample-player')[3].playbackRate = $(stretches[3]).val();
  });
  $(stretches[4]).on('input', function() {
        $('.sample-player')[4].playbackRate = $(stretches[4]).val();
  });
  $(stretches[5]).on('input', function() {
        $('.sample-player')[5].playbackRate = $(stretches[5]).val();
  });
  $(stretches[6]).on('input', function() {
        $('.sample-player')[6].playbackRate = $(stretches[6]).val();
  });
  $(stretches[7]).on('input', function() {
        $('.sample-player')[7].playbackRate = $(stretches[7]).val();
  });
  $(stretches[8]).on('input', function() {
        $('.sample-player')[8].playbackRate = $(stretches[8]).val();
  });
  $(stretches[9]).on('input', function() {
        $('.sample-player')[9].playbackRate = $(stretches[9]).val();
  });
  $(stretches[10]).on('input', function() {
        $('.sample-player')[10].playbackRate = $(stretches[10]).val();
  });
  $(stretches[11]).on('input', function() {
        $('.sample-player')[11].playbackRate = $(stretches[11]).val();
  });
  $(stretches[12]).on('input', function() {
        $('.sample-player')[12].playbackRate = $(stretches[12]).val();
  });
  $(stretches[13]).on('input', function() {
        $('.sample-player')[13].playbackRate = $(stretches[13]).val();
  });
  $(stretches[14]).on('input', function() {
        $('.sample-player')[14].playbackRate = $(stretches[14]).val();
  });
  $(stretches[15]).on('input', function() {
        $('.sample-player')[15].playbackRate = $(stretches[15]).val();
  });

  setRecordNode();

  setDestinations();


  // shim layer with setTimeout fallback
  window.requestAnimFrame = (function() {
    return  window.requestAnimationFrame       ||
      window.webkitRequestAnimationFrame ||
      window.mozRequestAnimationFrame    ||
      window.oRequestAnimationFrame      ||
      window.msRequestAnimationFrame     ||
      function( callback ){
      window.setTimeout(callback, 1000 / 60);
    };
  })();


  // Add missing functions to make the oscillator compatible with the later standard.
  function fixOscillator(osc)
  {
    if (typeof osc.start == 'undefined') {
      osc.start = function(when) {
        osc.noteOn(when);
      }
    }
    if (typeof osc.stop == 'undefined') {
      osc.stop = function(when) {
        osc.noteOff(when);
      }
    }
  }

  // Change HTML in a DIV or other element for debugging
  function writeMessageToID(id,message)
  {
    // Voodoo for browser compatibility.
    d=document;
    re = d.all ? d.all[id] : d.getElementById(id);
    re.innerHTML=message;
  }

  function AudioVisualizer(width, height)
  {
    this.analyser = context.createAnalyser();

    this.width = width;
    this.height = height;
    this.analyser.connect(context.destination);
    this.analyser.minDecibels = -140;
    this.analyser.maxDecibels = 0;
    this.fft_smoothing = 0.6;
    this.fft_size = 1024;

    this.freqs = new Uint8Array(this.analyser.frequencyBinCount);
    this.times = new Uint8Array(this.analyser.frequencyBinCount);
    this.isPlaying = false;
    this.drawCounter = 0;
  }

  AudioVisualizer.prototype.startAnimation = function()
  {
    this.isPlaying = true;
      // Start visualizer.
      requestAnimFrame(this.draw.bind(this));
  }

  AudioVisualizer.prototype.drawSpectrum = function(drawContext)
  {
    this.analyser.smoothingTimeConstant = this.fft_smoothing;
    this.analyser.fftSize = this.fft_size;

    // Get the frequency data from the currently playing music
    this.analyser.getByteFrequencyData(this.freqs);

    var width = Math.floor(1/this.freqs.length, 10);

    drawContext.fillStyle = 'hsl(200, 100%, 50%)';
    // Draw the frequency domain chart.
    for (var i = 0; i < this.analyser.frequencyBinCount; i++) {
      var value = this.freqs[i];
      var percent = value / 256;
      var height = this.height * percent;
      var offset = this.height - height - 1;
      var barWidth = this.width/this.analyser.frequencyBinCount;
      drawContext.fillRect(i * barWidth, offset, barWidth, height);
    }
  }

  AudioVisualizer.prototype.draw = function()
  {
    var canvas = document.querySelector('canvas');
    var drawContext = canvas.getContext('2d');
    canvas.width = this.width;
    canvas.height = this.height;

    this.drawSpectrum(drawContext);

    if ((this.drawCounter & 15) == 0) {
      this.analyser.getByteTimeDomainData(this.times);
    }

    // Draw the time domain chart.
    //drawContext.beginPath();
    drawContext.fillStyle = 'black';
    drawContext.moveTo(0, this.height/2);
    var barWidth = this.width/this.analyser.frequencyBinCount;
    for (var i = 0; i < this.analyser.frequencyBinCount; i++) {
    var value = this.times[i];
    var percent = value / 256;
    var height = this.height * percent;
    var ypos = this.height - height - 1;
    var xpos = i * barWidth;
    drawContext.lineTo(xpos, ypos);
    }
    //drawContext.closePath();
    drawContext.stroke();

    this.drawCounter += 1;

    if (this.isPlaying) {
      requestAnimFrame(this.draw.bind(this));
    }
  }

  AudioVisualizer.prototype.getFrequencyValue = function(freq) {
    var nyquist = context.sampleRate/2;
    var index = Math.round(freq/nyquist * this.freqs.length);
    return this.freqs[index];
  }

  // metronome
  var oscillator;
  var amp;

  // Create an AudioCOntext and a JavaScriptNode.
  function initAudio() {
    if( audioCtx )
    {
      oscillator = audioCtx.createOscillator();
      fixOscillator(oscillator);
      oscillator.frequency.value = 440;
      amp = audioCtx.createGain();
      amp.gain.value = 0;

      // Connect ooscillator to amp and amp to the mixer of the context.
      // This is like connecting cables between jacks on a modular synth.
      oscillator.connect(amp);
      amp.connect(audioCtx.destination);
      oscillator.start(0);
    }
  }

  // Set the frequency of the oscillator and start it running.
  function startTone( frequency )
  {
    var now = audioCtx.currentTime;

    oscillator.frequency.setValueAtTime(frequency, now);

    // Ramp up the gain so we can hear the sound.
    // We can ramp smoothly to the desired value.
    // First we should cancel any previous scheduled events that might interfere.
    amp.gain.cancelScheduledValues(now);
    // Anchor beginning of ramp at current value.
    amp.gain.setValueAtTime(amp.gain.value, now);
    amp.gain.linearRampToValueAtTime(0.5, audioCtx.currentTime + 0.01);
    amp.gain.linearRampToValueAtTime(0.0, audioCtx.currentTime + 0.11);
  }

  // init once the page has finished loading.
  initAudio();
  var $x = 1000;
  var $newbpm = 60;
  var $t;

  function beep() {
    startTone(200);
  }

  $('.stop-met').click(function() {
    clearInterval($t);
  });

  $('.start-met').click(function() {
    clearInterval($t);
    $newbpm = 1000*(Math.round($('.met').val()/60));
    $t = setInterval(beep,$newbpm);
  });
}, 1000);


// show choose kit
$('.choose-kit-button').on('click', function() {
  $('.btn-choose-kit-close').toggleClass('hide');
  $('.kit-options').toggleClass('kit-options-open');
  $(this).parent().toggleClass('col-lg-8 col-lg-offset-2 col-lg-12');
});

// switch kits
$('body').on('click', '.kit-samples', function(){
  newSamps = [];
  oldSamps = [];
  newSamps.push($(this).find('li'));
  oldSamps.push($('.main-sample-holder .sample-inner'));
  for (var i = 0; i < 16; i++) {
    oldSamps[0][i].innerHTML = newSamps[0][i].innerHTML;
  }
  $('.choose-kit-button-holder').toggleClass('col-lg-8 col-lg-offset-2 col-lg-12');
  $('.kit-options').toggleClass('kit-options-open');
  $('.btn-choose-kit-close').toggleClass('hide');
  setAudio();
  setSources();
  setFilterNodes();
  setRecordNode();
  setDestinations();
  setFilterValues();
});

// show sample bank
$('#btn-show-bank').on('click', function(){
  $(this).addClass('hide');
  $(this).parent().removeClass('col-lg-8');
  $(this).parent().removeClass('col-lg-offset-2');
  $(this).parent().addClass('col-lg-12');
  $('#btn-hide-bank, .sample-bank-buttons').removeClass('hide');
  $('.sample-bank').addClass('show-bank');
});

// hide sample bank
$('#btn-hide-bank').on('click', function(){
  $(this).addClass('hide');
  $('.sample-bank-buttons').addClass('hide');
  $(this).parent().removeClass('col-lg-12');
  $(this).parent().addClass('col-lg-8');
  $(this).parent().addClass('col-lg-offset-2');
  $('#btn-show-bank').removeClass('hide');
  $('.sample-bank').removeClass('show-bank');
});

// upload sample
$('.sample-upload-button').click(function(){
  setTimeout(function(){
    $('.form-control.src').attr('value', fileURL);
    $('.form-control.src').trigger('input')
  }, 2000);
});

var samplenames = [],
    sampleinfos = [],
    sampleurls = [];
$('.save-kit-button').click(function(){
  $('.sample-name').each(function(){
    samplenames.push($(this).text());
  });
  $('.sample-info').each(function(){
    sampleinfos.push($(this).text());
  });
  $('.sample-player').each(function(){
    sampleurls.push($(this).attr('src'));
  });

  // save sample names in new kit inputs
  $('.sample-1-name').attr('value', samplenames[0]).trigger('input');
  $('.sample-2-name').attr('value', samplenames[1]).trigger('input');
  $('.sample-3-name').attr('value', samplenames[2]).trigger('input');
  $('.sample-4-name').attr('value', samplenames[3]).trigger('input');
  $('.sample-5-name').attr('value', samplenames[4]).trigger('input');
  $('.sample-6-name').attr('value', samplenames[5]).trigger('input');
  $('.sample-7-name').attr('value', samplenames[6]).trigger('input');
  $('.sample-8-name').attr('value', samplenames[7]).trigger('input');
  $('.sample-9-name').attr('value', samplenames[8]).trigger('input');
  $('.sample-10-name').attr('value', samplenames[9]).trigger('input');
  $('.sample-11-name').attr('value', samplenames[10]).trigger('input');
  $('.sample-12-name').attr('value', samplenames[11]).trigger('input');
  $('.sample-13-name').attr('value', samplenames[12]).trigger('input');
  $('.sample-14-name').attr('value', samplenames[13]).trigger('input');
  $('.sample-15-name').attr('value', samplenames[14]).trigger('input');
  $('.sample-16-name').attr('value', samplenames[15]).trigger('input');

  $('.sample-1-info').attr('value', sampleinfos[0]).trigger('input');
  $('.sample-2-info').attr('value', sampleinfos[1]).trigger('input');
  $('.sample-3-info').attr('value', sampleinfos[2]).trigger('input');
  $('.sample-4-info').attr('value', sampleinfos[3]).trigger('input');
  $('.sample-5-info').attr('value', sampleinfos[4]).trigger('input');
  $('.sample-6-info').attr('value', sampleinfos[5]).trigger('input');
  $('.sample-7-info').attr('value', sampleinfos[6]).trigger('input');
  $('.sample-8-info').attr('value', sampleinfos[7]).trigger('input');
  $('.sample-9-info').attr('value', sampleinfos[8]).trigger('input');
  $('.sample-10-info').attr('value', sampleinfos[9]).trigger('input');
  $('.sample-11-info').attr('value', sampleinfos[10]).trigger('input');
  $('.sample-12-info').attr('value', sampleinfos[11]).trigger('input');
  $('.sample-13-info').attr('value', sampleinfos[12]).trigger('input');
  $('.sample-14-info').attr('value', sampleinfos[13]).trigger('input');
  $('.sample-15-info').attr('value', sampleinfos[14]).trigger('input');
  $('.sample-16-info').attr('value', sampleinfos[15]).trigger('input');

  $('.sample-1-url').attr('value', sampleurls[0]).trigger('input');
  $('.sample-2-url').attr('value', sampleurls[1]).trigger('input');
  $('.sample-3-url').attr('value', sampleurls[2]).trigger('input');
  $('.sample-4-url').attr('value', sampleurls[3]).trigger('input');
  $('.sample-5-url').attr('value', sampleurls[4]).trigger('input');
  $('.sample-6-url').attr('value', sampleurls[5]).trigger('input');
  $('.sample-7-url').attr('value', sampleurls[6]).trigger('input');
  $('.sample-8-url').attr('value', sampleurls[7]).trigger('input');
  $('.sample-9-url').attr('value', sampleurls[8]).trigger('input');
  $('.sample-10-url').attr('value', sampleurls[9]).trigger('input');
  $('.sample-11-url').attr('value', sampleurls[10]).trigger('input');
  $('.sample-12-url').attr('value', sampleurls[11]).trigger('input');
  $('.sample-13-url').attr('value', sampleurls[12]).trigger('input');
  $('.sample-14-url').attr('value', sampleurls[13]).trigger('input');
  $('.sample-15-url').attr('value', sampleurls[14]).trigger('input');
  $('.sample-16-url').attr('value', sampleurls[15]).trigger('input');
});

// this function grabs the new sample you want to load
function reply_click(clicked_id)
{
    newSample = (clicked_id);
}

// this sample loads the new sample and plays it
$('.main-sample-holder').on('click', 'li', function(){
  if (typeof(newSample) !== 'undefined' && newSample !== '') {
    $(this).find('.sample-inner').html(newSample);
    newSample = '';
    $('.save-kit-button').removeClass('hide');
    setAudio();
    setSingleSource($(this).index());
    setFilterNodes();
    setRecordNode();
    setDestinations();
    setFilterValues();
    $(this).find('.sample-player')[0].pause();
    $(this).find('.sample-player')[0].currentTime = 0;
    $(this).find('.sample-player')[0].play();
  }
});

// play samples on click
$('body').on('mousedown','.sample', function(){
  $(this).find('.sample-player')[0].pause();
  $(this).find('.sample-player')[0].currentTime = 0;
  $(this).find('.sample-player')[0].play();
  $(this).addClass('selected');
  var me = this;
  setTimeout(function(){
    $(me).removeClass('selected');
  }, 100);
});



</script>
